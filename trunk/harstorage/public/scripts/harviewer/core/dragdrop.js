require.def("core/dragdrop",["core/lib"],function(a){function d(a){return isNaN(window.scrollX)?new c(a.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,a.clientY+document.documentElement.scrollTop+document.body.scrollTop):new c(a.clientX+window.scrollX,a.clientY+window.scrollY)}function c(a,b){this.x=a,this.y=b,this.Add=function(a){var b=new c(this.x,this.y);a!=null&&(isNaN(a.x)||(b.x+=a.x),isNaN(a.y)||(b.y+=a.y));return b},this.Subtract=function(a){var b=new c(this.x,this.y);a!=null&&(isNaN(a.x)||(b.x-=a.x),isNaN(a.y)||(b.y-=a.y));return b},this.Bound=function(a,b){var c=this.Max(a);return c.Min(b)},this.Check=function(){var a=new c(this.x,this.y);isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0);return a},this.Apply=function(a){typeof a=="string"&&(a=document.getElementById(a));a&&(isNaN(this.x)||(a.style.left=this.x+"px"),isNaN(this.y)||(a.style.top=this.y+"px"))}}function b(b,c){this.element=b,this.handle=b,this.callbacks=c,this.cursorStartPos=null,this.cursorLastPos=null,this.dragging=!1,this.onDragStart=a.bind(this.onDragStart,this),this.onDragOver=a.bind(this.onDragOver,this),this.onDrop=a.bind(this.onDrop,this),a.addEventListener(this.element,"mousedown",this.onDragStart,!1),this.active=!0}b.prototype={onDragStart:function(b){var c=a.fixEvent(b);this.dragging||(this.callbacks.onDragStart&&this.callbacks.onDragStart(this),this.dragging=!0,this.cursorStartPos=d(c),this.cursorLastPos=this.cursorStartPos,a.addEventListener(this.element.ownerDocument,"mousemove",this.onDragOver,!1),a.addEventListener(this.element.ownerDocument,"mouseup",this.onDrop,!1),a.cancelEvent(c))},onDragOver:function(b){if(this.dragging){var c=a.fixEvent(b);a.cancelEvent(c);var e=d(c),e=e.Subtract(this.cursorStartPos);if(this.cursorLastPos.x==e.x&&this.cursorLastPos.y==e.y)return;this.cursorLastPos=e,this.callbacks.onDragOver!=null&&this.callbacks.onDragOver(e,this)}},onDrop:function(b){if(this.dragging){var c=a.fixEvent(b);a.cancelEvent(c),this.dragStop()}},dragStop:function(){this.dragging&&(a.removeEventListener(this.element.ownerDocument,"mousemove",this.onDragOver,!1),a.removeEventListener(this.element.ownerDocument,"mouseup",this.onDrop,!1),this.cursorStartPos=null,this.cursorLastPos=null,this.callbacks.onDrop!=null&&this.callbacks.onDrop(this),this.dragging=!1)},destroy:function(){a.removeEventListener(this.element,"mousedown",this.onDragStart,!1),this.active=!1,this.dragging&&this.dragStop()}};var e={};e.Tracker=b;return e})